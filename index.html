<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Smart Financial Freedom Tracker</title>
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIlNtYXJ0IEZpbmFuY2lhbCBGcmVlZG9tIFRyYWNrZXIiLAogICJzaG9ydF9uYW1lIjogIlNtYXJ0RmluVHJhY2tlciIsCiAgImRlc2NyaXB0aW9uIjogIkFJLXBvd2VyZWQgcGVyc29uYWwgZmluYW5jZSB0cmFja2VyIHdpdGggc21hcnQgbm90aWZpY2F0aW9ucyIsCiAgInN0YXJ0X3VybCI6ICIvIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjZmZmZmZmIiwKICAidGhlbWVfY29sb3IiOiAiIzNCODJGNiIsCiAgIm9yaWVudGF0aW9uIjogInBvcnRyYWl0IiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFMQUFBQUF3Q0FZQUFBQ0I2V0o4QUFBQUJ3a2xFUVZSWUNlMVpRWGNjTXVYQTJSZDc5OWZiWEo0aWtBOEsrRjNCQWtocGZHZ051ektKSTJFZGhYaDhCQWdnelNMU01sVHpKRklCL3BhNDBJME5lWHl6WVpyRWFVNGRDYWFyQUNEQVZMYjFHakJNUHdyY1BLQ0FESDJnZGNHTER0cGZpN3lsaEhMZXJ5cEFhWXhKaDhrcUYyV1pqQXJEUzRIZFl1bGJaOEdUbHNNRW5CTEV5OUFBOTVBcjBiSERTWWs5ZGs2bk5aMk5HWTRPaXQ5eWZ3NExTdERkcEFrRUlONE5mVEh1aEtoc3poQTEzZEc5dUJaUkUvbW5aWkR1SVJ5dGpHM2t5UVlKUkJ4NTFNODRwczFrbEU0YUl0d2lWSENaR1BISUtKRExnVWdtMXQ2VllHQTQyenNqTkthVk5KRy94Z2hnUzlwMEYyVGsrVFZkZjdSNE1wMURPOXAwRXU3UUFBQUFC SlJVNUVya0pnZ2c9PSIsCiAgICAgICJzaXplcyI6ICIxOTJ4MTkyIiwKICAgICAgInR5cGUiOiAiaW1hZ2UvcG5nIgogICAgfQogIF0KfQ==">
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="FinTracker">
    
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            overflow-x: hidden;
        }
        
        .sidebar {
            width: 280px;
            height: 100vh;
            background: #111111;
            border-right: 1px solid #1f1f1f;
            display: flex;
            flex-direction: column;
            position: fixed;
            left: 0;
            top: 0;
            z-index: 100;
        }
        
        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid #1f1f1f;
        }
        
        .sidebar-content {
            flex: 1;
            padding: 20px 0;
            overflow-y: auto;
        }
        
        .nav-section {
            margin-bottom: 24px;
        }
        
        .nav-title {
            font-size: 12px;
            font-weight: 600;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
            padding: 0 20px;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            padding: 8px 20px;
            color: #ccc;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            border: none;
            background: none;
            width: 100%;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .nav-item:hover {
            background: #1a1a1a;
            color: #fff;
        }
        
        .nav-item.active {
            background: #1e40af;
            color: #fff;
        }
        
        .nav-icon {
            width: 20px;
            height: 20px;
            margin-right: 12px;
        }
        
        .main-content {
            margin-left: 280px;
            min-height: 100vh;
            background: #0a0a0a;
        }
        
        .header {
            height: 60px;
            background: #111111;
            border-bottom: 1px solid #1f1f1f;
            display: flex;
            align-items: center;
            padding: 0 24px;
            justify-content: space-between;
        }
        
        .dashboard-content {
            padding: 24px;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .metric-card {
            background: #111111;
            border: 1px solid #1f1f1f;
            border-radius: 12px;
            padding: 24px;
            transition: border-color 0.2s;
        }
        
        .metric-card:hover {
            border-color: #333;
        }
        
        .metric-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }
        
        .metric-title {
            font-size: 14px;
            font-weight: 500;
            color: #ccc;
        }
        
        .metric-value {
            font-size: 32px;
            font-weight: 700;
            color: #fff;
            margin-bottom: 8px;
        }
        
        .metric-subtitle {
            font-size: 12px;
            color: #666;
        }
        
        .section-card {
            background: #111111;
            border: 1px solid #1f1f1f;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 24px;
        }
        
        .section-header {
            padding: 20px 24px;
            border-bottom: 1px solid #1f1f1f;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #fff;
        }
        
        .section-content {
            padding: 24px;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-label {
            font-size: 14px;
            font-weight: 500;
            color: #ccc;
            margin-bottom: 8px;
        }
        
        .form-input {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 12px;
            color: #fff;
            font-size: 14px;
            transition: border-color 0.2s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #1e40af;
        }
        
        .form-select {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 12px;
            color: #fff;
            font-size: 14px;
            cursor: pointer;
        }
        
        .btn {
            background: #1e40af;
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 12px 20px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .btn:hover {
            background: #1d4ed8;
        }
        
        .btn-danger {
            background: #dc2626;
        }
        
        .btn-danger:hover {
            background: #b91c1c;
        }
        
        .btn-success {
            background: #16a34a;
        }
        
        .btn-success:hover {
            background: #15803d;
        }
        
        .btn-outline {
            background: transparent;
            border: 1px solid #333;
            color: #ccc;
        }
        
        .btn-outline:hover {
            background: #1a1a1a;
            color: #fff;
        }
        
        .transaction-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .transaction-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 0;
            border-bottom: 1px solid #1f1f1f;
        }
        
        .transaction-item:last-child {
            border-bottom: none;
        }
        
        .transaction-info {
            flex: 1;
        }
        
        .transaction-description {
            font-size: 14px;
            font-weight: 500;
            color: #fff;
            margin-bottom: 4px;
        }
        
        .transaction-meta {
            font-size: 12px;
            color: #666;
        }
        
        .transaction-amount {
            font-size: 16px;
            font-weight: 600;
            margin-right: 12px;
        }
        
        .amount-positive {
            color: #16a34a;
        }
        
        .amount-negative {
            color: #dc2626;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #1a1a1a;
            border-radius: 4px;
            overflow: hidden;
            margin: 12px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: #1e40af;
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .budget-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .budget-item {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 20px;
        }
        
        .budget-header {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .budget-icon {
            font-size: 20px;
            margin-right: 12px;
        }
        
        .budget-title {
            font-size: 16px;
            font-weight: 600;
            color: #fff;
        }
        
        .budget-amounts {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .budget-spent {
            font-size: 14px;
            color: #ccc;
        }
        
        .budget-remaining {
            font-size: 14px;
            color: #16a34a;
            font-weight: 500;
        }
        
        .mobile-hidden {
            display: block;
        }
        
        .mobile-menu-toggle {
            display: none;
        }
        
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            
            .sidebar.open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .mobile-menu-toggle {
                display: block;
            }
            
            .mobile-hidden {
                display: none;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .dashboard-content {
                padding: 16px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Data Management
        const DataManager = {
            save: (key, data) => {
                try {
                    localStorage.setItem(key, JSON.stringify(data));
                    return true;
                } catch (error) {
                    console.error('Failed to save data:', error);
                    return false;
                }
            },
            
            load: (key, defaultValue = null) => {
                try {
                    const data = localStorage.getItem(key);
                    return data ? JSON.parse(data) : defaultValue;
                } catch (error) {
                    console.error('Failed to load data:', error);
                    return defaultValue;
                }
            },
            
            remove: (key) => {
                try {
                    localStorage.removeItem(key);
                    return true;
                } catch (error) {
                    console.error('Failed to remove data:', error);
                    return false;
                }
            }
        };

        // User Management
        const UserManager = {
            register: (username, password) => {
                const users = DataManager.load('users', {});
                if (users[username]) {
                    return { success: false, message: 'Username already exists' };
                }
                
                users[username] = {
                    password: btoa(password),
                    createdAt: new Date().toISOString(),
                    resetCode: Math.random().toString(36).substr(2, 8)
                };
                
                DataManager.save('users', users);
                return { 
                    success: true, 
                    message: 'Account created successfully',
                    resetCode: users[username].resetCode
                };
            },
            
            login: (username, password) => {
                const users = DataManager.load('users', {});
                const user = users[username];
                
                if (!user || user.password !== btoa(password)) {
                    return { success: false, message: 'Invalid username or password' };
                }
                
                DataManager.save('currentUser', username);
                return { success: true, message: 'Login successful' };
            },
            
            resetAccount: (username, resetCode, newPassword) => {
                const users = DataManager.load('users', {});
                const user = users[username];
                
                if (!user || user.resetCode !== resetCode) {
                    return { success: false, message: 'Invalid username or reset code' };
                }
                
                user.password = btoa(newPassword);
                user.resetCode = Math.random().toString(36).substr(2, 8);
                DataManager.save('users', users);
                
                const currentUser = DataManager.load('currentUser');
                if (currentUser === username) {
                    DataManager.remove(`transactions_${username}`);
                    DataManager.remove(`spent_${username}`);
                    DataManager.remove(`debtCycleData_${username}`);
                    DataManager.remove(`currentBalance_${username}`);
                }
                
                return { 
                    success: true, 
                    message: 'Account reset successfully',
                    newResetCode: user.resetCode
                };
            },
            
            getCurrentUser: () => DataManager.load('currentUser'),
            logout: () => DataManager.remove('currentUser')
        };

        // Login Component
        const LoginScreen = ({ onLogin }) => {
            const [mode, setMode] = useState('login');
            const [username, setUsername] = useState('');
            const [password, setPassword] = useState('');
            const [resetCode, setResetCode] = useState('');
            const [message, setMessage] = useState('');

            const handleSubmit = (e) => {
                e.preventDefault();
                setMessage('');

                if (mode === 'login') {
                    const result = UserManager.login(username, password);
                    setMessage(result.message);
                    if (result.success) {
                        onLogin(username);
                    }
                } else if (mode === 'register') {
                    if (password.length < 4) {
                        setMessage('Password must be at least 4 characters');
                        return;
                    }
                    const result = UserManager.register(username, password);
                    setMessage(result.message);
                    if (result.success) {
                        setMessage(`Account created! Your reset code is: ${result.resetCode} (save this!)`);
                    }
                } else if (mode === 'reset') {
                    if (password.length < 4) {
                        setMessage('New password must be at least 4 characters');
                        return;
                    }
                    const result = UserManager.resetAccount(username, resetCode, password);
                    setMessage(result.message);
                    if (result.success) {
                        setMessage(`Account reset! New reset code: ${result.newResetCode} (save this!)`);
                        setMode('login');
                    }
                }
            };

            return (
                <div style={{
                    minHeight: '100vh',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    padding: '20px',
                    background: '#0a0a0a'
                }}>
                    <div style={{
                        background: '#111111',
                        border: '1px solid #1f1f1f',
                        borderRadius: '12px',
                        padding: '32px',
                        width: '100%',
                        maxWidth: '400px'
                    }}>
                        <div style={{ textAlign: 'center', marginBottom: '32px' }}>
                            <h1 style={{
                                fontSize: '28px',
                                fontWeight: 'bold',
                                color: '#fff',
                                marginBottom: '8px'
                            }}>
                                üí∞ FinTracker
                            </h1>
                            <p style={{ color: '#666', fontSize: '14px' }}>
                                {mode === 'login' && 'Welcome back! Sign in to continue'}
                                {mode === 'register' && 'Create your secure account'}
                                {mode === 'reset' && 'Reset your account data'}
                            </p>
                        </div>

                        <form onSubmit={handleSubmit}>
                            <div className="form-group" style={{ marginBottom: '16px' }}>
                                <input
                                    type="text"
                                    placeholder="Username"
                                    value={username}
                                    onChange={(e) => setUsername(e.target.value)}
                                    className="form-input"
                                    required
                                />
                            </div>

                            {mode === 'reset' && (
                                <div className="form-group" style={{ marginBottom: '16px' }}>
                                    <input
                                        type="text"
                                        placeholder="Reset Code"
                                        value={resetCode}
                                        onChange={(e) => setResetCode(e.target.value)}
                                        className="form-input"
                                        required
                                    />
                                </div>
                            )}

                            <div className="form-group" style={{ marginBottom: '20px' }}>
                                <input
                                    type="password"
                                    placeholder={mode === 'reset' ? 'New Password' : 'Password'}
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    className="form-input"
                                    required
                                />
                            </div>

                            <button type="submit" className="btn" style={{ width: '100%', marginBottom: '16px' }}>
                                {mode === 'login' && 'Sign In'}
                                {mode === 'register' && 'Create Account'}
                                {mode === 'reset' && 'Reset Account'}
                            </button>

                            {message && (
                                <div style={{
                                    padding: '12px',
                                    borderRadius: '8px',
                                    marginBottom: '16px',
                                    background: message.includes('successful') || message.includes('created') ? '#16a34a20' : '#dc262620',
                                    border: `1px solid ${message.includes('successful') || message.includes('created') ? '#16a34a' : '#dc2626'}`,
                                    color: message.includes('successful') || message.includes('created') ? '#16a34a' : '#dc2626',
                                    fontSize: '14px',
                                    whiteSpace: 'pre-line'
                                }}>
                                    {message}
                                </div>
                            )}

                            <div style={{ textAlign: 'center', fontSize: '14px' }}>
                                {mode === 'login' && (
                                    <>
                                        <button 
                                            type="button" 
                                            onClick={() => setMode('register')}
                                            className="btn-outline"
                                            style={{ marginRight: '12px', background: 'none', border: 'none', color: '#666', cursor: 'pointer' }}
                                        >
                                            Create Account
                                        </button>
                                        <button 
                                            type="button" 
                                            onClick={() => setMode('reset')}
                                            style={{ background: 'none', border: 'none', color: '#dc2626', cursor: 'pointer' }}
                                        >
                                            Reset Account
                                        </button>
                                    </>
                                )}
                                {mode !== 'login' && (
                                    <button 
                                        type="button" 
                                        onClick={() => setMode('login')}
                                        style={{ background: 'none', border: 'none', color: '#666', cursor: 'pointer' }}
                                    >
                                        Back to Login
                                    </button>
                                )}
                            </div>
                        </form>
                    </div>
                </div>
            );
        };

        // Sidebar Component
        const Sidebar = ({ currentUser, onLogout, activeSection, onSectionChange }) => {
            const navItems = [
                { id: 'overview', label: 'Overview', icon: 'ÔøΩÔøΩ' },
                { id: 'transactions', label: 'Transactions', icon: 'üí≥' },
                { id: 'budgets', label: 'Budgets', icon: 'üéØ' },
                { id: 'debt', label: 'Debt Tracking', icon: '‚ö†Ô∏è' },
                { id: 'analytics', label: 'Analytics', icon: 'üìà' }
            ];

            return (
                <div className="sidebar">
                    <div className="sidebar-header">
                        <h2 style={{ fontSize: '20px', fontWeight: 'bold', color: '#fff' }}>
                            üí∞ FinTracker
                        </h2>
                        <p style={{ fontSize: '12px', color: '#666', marginTop: '4px' }}>
                            Welcome, {currentUser}
                        </p>
                    </div>
                    
                    <div className="sidebar-content">
                        <div className="nav-section">
                            <div className="nav-title">Navigation</div>
                            {navItems.map(item => (
                                <button
                                    key={item.id}
                                    className={`nav-item ${activeSection === item.id ? 'active' : ''}`}
                                    onClick={() => onSectionChange(item.id)}
                                >
                                    <span className="nav-icon">{item.icon}</span>
                                    {item.label}
                                </button>
                            ))}
                        </div>
                        
                        <div className="nav-section">
                            <div className="nav-title">Account</div>
                            <button className="nav-item" onClick={onLogout}>
                                <span className="nav-icon">üö™</span>
                                Logout
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // Main Dashboard Component
        const FinancialDashboard = () => {
            const [currentUser, setCurrentUser] = useState(null);
            const [activeSection, setActiveSection] = useState('overview');
            const [sidebarOpen, setSidebarOpen] = useState(false);
            
            // User-specific data
            const getUserKey = (key) => currentUser ? `${key}_${currentUser}` : key;
            
            const [currentBalance, setCurrentBalance] = useState(() => {
                return DataManager.load(getUserKey('currentBalance'), 93700);
            });
            
            const [transactions, setTransactions] = useState(() => {
                return DataManager.load(getUserKey('transactions'), []);
            });
            
            const [budgetLimits] = useState({
                essentials: 51535,
                discretionary: 18740,
                debt: 20000,
                emergency: 3425
            });
            
            const [spent, setSpent] = useState(() => {
                return DataManager.load(getUserKey('spent'), {
                    essentials: 0,
                    discretionary: 0,
                    debt: 0,
                    emergency: 0
                });
            });
            
            const [debtCycleData, setDebtCycleData] = useState(() => {
                return DataManager.load(getUserKey('debtCycleData'), {
                    totalOwed: 50000,
                    lastPayment: 0,
                    friendWithdrawals: 0,
                    netReduction: 0,
                    cycleCount: 0
                });
            });
            
            const [newTransaction, setNewTransaction] = useState({
                amount: '',
                category: 'essentials',
                description: '',
                type: 'expense'
            });

            // Initialize user state
            useEffect(() => {
                const user = UserManager.getCurrentUser();
                setCurrentUser(user);
            }, []);

            // Save data when it changes
            useEffect(() => {
                if (!currentUser) return;
                
                DataManager.save(getUserKey('currentBalance'), currentBalance);
                DataManager.save(getUserKey('transactions'), transactions);
                DataManager.save(getUserKey('spent'), spent);
                DataManager.save(getUserKey('debtCycleData'), debtCycleData);
            }, [currentUser, currentBalance, transactions, spent, debtCycleData]);

            const handleLogin = (username) => {
                setCurrentUser(username);
                
                // Load user-specific data
                setCurrentBalance(DataManager.load(`currentBalance_${username}`, 93700));
                setTransactions(DataManager.load(`transactions_${username}`, []));
                setSpent(DataManager.load(`spent_${username}`, {
                    essentials: 0,
                    discretionary: 0,
                    debt: 0,
                    emergency: 0
                }));
                setDebtCycleData(DataManager.load(`debtCycleData_${username}`, {
                    totalOwed: 50000,
                    lastPayment: 0,
                    friendWithdrawals: 0,
                    netReduction: 0,
                    cycleCount: 0
                }));
            };

            const handleLogout = () => {
                UserManager.logout();
                setCurrentUser(null);
            };

            const addTransaction = () => {
                if (!newTransaction.amount || !newTransaction.description) {
                    alert('Please enter both amount and description');
                    return;
                }
                
                const amount = parseFloat(newTransaction.amount);
                const transaction = {
                    id: Date.now(),
                    amount: amount,
                    category: newTransaction.category,
                    description: newTransaction.description,
                    type: newTransaction.type,
                    date: new Date().toLocaleDateString(),
                    timestamp: new Date().toISOString()
                };

                const newTransactions = [transaction, ...transactions];
                setTransactions(newTransactions);
                
                if (transaction.type === 'expense') {
                    const newSpent = {
                        ...spent,
                        [transaction.category]: spent[transaction.category] + transaction.amount
                    };
                    setSpent(newSpent);
                    setCurrentBalance(prev => prev - transaction.amount);
                } else {
                    setCurrentBalance(prev => prev + transaction.amount);
                }

                setNewTransaction({
                    ...newTransaction,
                    amount: '',
                    description: ''
                });
            };

            const deleteTransaction = (transactionId) => {
                const transaction = transactions.find(t => t.id === transactionId);
                if (!transaction) return;

                const newTransactions = transactions.filter(t => t.id !== transactionId);
                setTransactions(newTransactions);
                
                if (transaction.type === 'expense') {
                    const newSpent = {
                        ...spent,
                        [transaction.category]: Math.max(0, spent[transaction.category] - transaction.amount)
                    };
                    setSpent(newSpent);
                    setCurrentBalance(prev => prev + transaction.amount);
                } else {
                    setCurrentBalance(prev => prev - transaction.amount);
                }
            };

            const getRemainingBudget = (category) => {
                return Math.max(0, budgetLimits[category] - spent[category]);
            };

            const getPercentageUsed = (category) => {
                return Math.min(100, (spent[category] / budgetLimits[category]) * 100);
            };

            // If no user is logged in, show login screen
            if (!currentUser) {
                return <LoginScreen onLogin={handleLogin} />;
            }

            // Overview Section
            const OverviewSection = () => (
                <div>
                    <div className="metrics-grid">
                        <div className="metric-card">
                            <div className="metric-header">
                                <div className="metric-title">Current Balance</div>
                                <span style={{ fontSize: '20px' }}>üí∞</span>
                            </div>
                            <div className="metric-value">‚Çπ{currentBalance.toLocaleString()}</div>
                            <div className="metric-subtitle">Available this month</div>
                        </div>
                        
                        <div className="metric-card">
                            <div className="metric-header">
                                <div className="metric-title">Total Debt</div>
                                <span style={{ fontSize: '20px' }}>‚ö†Ô∏è</span>
                            </div>
                            <div className="metric-value" style={{ color: '#dc2626' }}>
                                ‚Çπ{debtCycleData.totalOwed.toLocaleString()}
                            </div>
                            <div className="metric-subtitle">Outstanding debt</div>
                        </div>
                        
                        <div className="metric-card">
                            <div className="metric-header">
                                <div className="metric-title">Monthly Spending</div>
                                <span style={{ fontSize: '20px' }}>üìä</span>
                            </div>
                            <div className="metric-value">
                                ‚Çπ{Object.values(spent).reduce((a, b) => a + b, 0).toLocaleString()}
                            </div>
                            <div className="metric-subtitle">Total spent this month</div>
                        </div>
                        
                        <div className="metric-card">
                            <div className="metric-header">
                                <div className="metric-title">Transactions</div>
                                <span style={{ fontSize: '20px' }}>üí≥</span>
                            </div>
                            <div className="metric-value">{transactions.length}</div>
                            <div className="metric-subtitle">Total transactions</div>
                        </div>
                    </div>

                    <div className="section-card">
                        <div className="section-header">
                            <div className="section-title">Budget Overview</div>
                        </div>
                        <div className="section-content">
                            <div className="budget-grid">
                                {Object.entries(budgetLimits).map(([category, limit]) => {
                                    const percentage = getPercentageUsed(category);
                                    const remaining = getRemainingBudget(category);
                                    const icons = {
                                        essentials: 'üè†',
                                        discretionary: 'üéØ',
                                        debt: 'üí≥',
                                        emergency: 'üõ°Ô∏è'
                                    };
                                    
                                    return (
                                        <div key={category} className="budget-item">
                                            <div className="budget-header">
                                                <div className="budget-icon">{icons[category]}</div>
                                                <div className="budget-title">
                                                    {category.charAt(0).toUpperCase() + category.slice(1)}
                                                </div>
                                            </div>
                                            
                                            <div className="budget-amounts">
                                                <div className="budget-spent">
                                                    Spent: ‚Çπ{spent[category].toLocaleString()}
                                                </div>
                                                <div className="budget-remaining">
                                                    Left: ‚Çπ{remaining.toLocaleString()}
                                                </div>
                                            </div>
                                            
                                            <div className="progress-bar">
                                                <div 
                                                    className="progress-fill"
                                                    style={{ 
                                                        width: `${percentage}%`,
                                                        background: percentage >= 90 ? '#dc2626' : percentage >= 75 ? '#f59e0b' : '#1e40af'
                                                    }}
                                                ></div>
                                            </div>
                                            
                                            <div style={{ textAlign: 'center', fontSize: '12px', color: '#666' }}>
                                                {percentage.toFixed(1)}% used
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                    </div>
                </div>
            );

            // Transactions Section
            const TransactionsSection = () => (
                <div>
                    <div className="section-card">
                        <div className="section-header">
                            <div className="section-title">Add Transaction</div>
                        </div>
                        <div className="section-content">
                            <div className="form-grid">
                                <div className="form-group">
                                    <label className="form-label">Amount</label>
                                    <input
                                        type="number"
                                        placeholder="Enter amount"
                                        value={newTransaction.amount}
                                        onChange={(e) => setNewTransaction(prev => ({...prev, amount: e.target.value}))}
                                        className="form-input"
                                    />
                                </div>
                                
                                <div className="form-group">
                                    <label className="form-label">Category</label>
                                    <select
                                        value={newTransaction.category}
                                        onChange={(e) => setNewTransaction(prev => ({...prev, category: e.target.value}))}
                                        className="form-select"
                                    >
                                        <option value="essentials">üè† Essentials</option>
                                        <option value="discretionary">üéØ Discretionary</option>
                                        <option value="debt">üí≥ Debt Payment</option>
                                        <option value="emergency">üõ°Ô∏è Emergency Fund</option>
                                    </select>
                                </div>
                                
                                <div className="form-group">
                                    <label className="form-label">Type</label>
                                    <select
                                        value={newTransaction.type}
                                        onChange={(e) => setNewTransaction(prev => ({...prev, type: e.target.value}))}
                                        className="form-select"
                                    >
                                        <option value="expense">üí∏ Expense</option>
                                        <option value="income">üí∞ Income</option>
                                    </select>
                                </div>
                                
                                <div className="form-group">
                                    <label className="form-label">Description</label>
                                    <input
                                        type="text"
                                        placeholder="Transaction description"
                                        value={newTransaction.description}
                                        onChange={(e) => setNewTransaction(prev => ({...prev, description: e.target.value}))}
                                        className="form-input"
                                    />
                                </div>
                            </div>
                            
                            <button onClick={addTransaction} className="btn">
                                Add Transaction
                            </button>
                        </div>
                    </div>

                    <div className="section-card">
                        <div className="section-header">
                            <div className="section-title">Recent Transactions</div>
                            <div style={{ fontSize: '14px', color: '#666' }}>
                                {transactions.length} total
                            </div>
                        </div>
                        <div className="section-content">
                            <div className="transaction-list">
                                {transactions.length === 0 ? (
                                    <div style={{ textAlign: 'center', padding: '40px', color: '#666' }}>
                                        <div style={{ fontSize: '24px', marginBottom: '12px' }}>üí≠</div>
                                        <p>No transactions yet. Add your first transaction above!</p>
                                    </div>
                                ) : (
                                    transactions.slice(0, 20).map((transaction) => (
                                        <div key={transaction.id} className="transaction-item">
                                            <div className="transaction-info">
                                                <div className="transaction-description">
                                                    {transaction.description}
                                                </div>
                                                <div className="transaction-meta">
                                                    {transaction.category} ‚Ä¢ {transaction.date}
                                                </div>
                                            </div>
                                            <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>
                                                <div className={`transaction-amount ${transaction.type === 'expense' ? 'amount-negative' : 'amount-positive'}`}>
                                                    {transaction.type === 'expense' ? '-' : '+'}‚Çπ{transaction.amount.toLocaleString()}
                                                </div>
                                                <button
                                                    onClick={() => deleteTransaction(transaction.id)}
                                                    className="btn-danger"
                                                    style={{ padding: '6px 12px', fontSize: '12px' }}
                                                >
                                                    Delete
                                                </button>
                                            </div>
                                        </div>
                                    ))
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );

            const renderActiveSection = () => {
                switch (activeSection) {
                    case 'overview':
                        return <OverviewSection />;
                    case 'transactions':
                        return <TransactionsSection />;
                    case 'budgets':
                        return <OverviewSection />; // Placeholder
                    case 'debt':
                        return <OverviewSection />; // Placeholder
                    case 'analytics':
                        return <OverviewSection />; // Placeholder
                    default:
                        return <OverviewSection />;
                }
            };

            return (
                <div>
                    <Sidebar 
                        currentUser={currentUser}
                        onLogout={handleLogout}
                        activeSection={activeSection}
                        onSectionChange={setActiveSection}
                    />
                    
                    <div className="main-content">
                        <div className="header">
                            <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>
                                <button 
                                    className="mobile-menu-toggle btn-outline"
                                    onClick={() => setSidebarOpen(!sidebarOpen)}
                                    style={{ padding: '8px' }}
                                >
                                    ‚ò∞
                                </button>
                                <h1 style={{ fontSize: '18px', fontWeight: '600', color: '#fff' }}>
                                    {activeSection.charAt(0).toUpperCase() + activeSection.slice(1)}
                                </h1>
                            </div>
                            
                            <div style={{ fontSize: '14px', color: '#666' }}>
                                Smart Financial Freedom Tracker
                            </div>
                        </div>
                        
                        <div className="dashboard-content">
                            {renderActiveSection()}
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<FinancialDashboard />, document.getElementById('root'));
    </script>
</body>
</html>
